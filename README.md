# 猫のお庭でデジタルデトックス

Flutter を使った iOS / Android 向けのデジタルデトックスアプリです。スマートフォンをスリープ状態にしている時間に「ねこポイント」が貯まり、ポイントで猫たちのご飯や遊び場を増やしていくと、庭に遊びに来る猫が増えていきます。

## 主な機能

- **スリープ計測**: アプリがバックグラウンドになっている間の時間を計測し、最大 8 時間分までポイントを自動で付与します。
- **ご飯タイム**: 貯めたポイントで猫にご飯をあげると、仲間の猫が増えたり、着せ替えアイテムが解放されます。
- **遊び場づくり**: 滑り台やキャットウォークなどの遊び場をポイントで設置し、庭をカスタマイズできます。
- **猫の着せ替え**: 条件を満たした猫にはリボンや帽子などのアクセントカラーを付けて楽しめます。
- **デバッグ用ポイント付与**: 右下の「お試し +60pt」ボタンでポイントを即時追加し、フィーチャーを簡単に確認できます。

## 画面構成

- **お庭タブ**: 庭に来ている猫たちと、設置済みの遊び場を確認できます。
- **ご飯タブ**: 猫たちのプロフィールを見たり、ご飯をあげて着せ替えを楽しめます。
- **遊び場タブ**: 滑り台やキャットウォークなどの設備を購入し、庭を充実させます。

## 開発環境

- Flutter 3.3 以降
- Dart 3.3 以降

プロジェクトルートで以下を実行してください。

```bash
flutter pub get
flutter run
```

### プラットフォームプロジェクトの生成

初回セットアップでは以下を実行して Android/iOS のビルド用ディレクトリを生成してください。

```bash
flutter create . --platforms=android,ios
```

### 画像アセットについて

このリポジトリにはバイナリ画像を含めていないため、`assets/images/` ディレクトリには README のみが入っています。猫のスプライトシートを利用する場合は、以下の手順でユーザー自身の画像を配置してください。

1. 提供された猫画像を `assets/images/cat_sheet_1.png` および `assets/images/cat_sheet_2.png` として保存します。1 枚につき 4×4 マス、合計 16 体の猫が均等に並ぶスプライトシート形式を想定しています。表示時は 1 マスあたり 72×72 ピクセルで描画されるため、最低でも 288×288 ピクセル (またはその整数倍) の正方形画像を用意するとバランスよく表示されます。
2. 別のファイル名を使いたい場合は `lib/models/cat.dart` の `CatSheet` 定義を調整し、対応するパスを更新します。
3. `.gitignore` により `assets/images/*.png` はコミット対象から除外されるため、チームで共有する場合は外部ストレージ等に配置して共有してください。

画像が未配置の場合はアプリ内で猫のアイコンと案内メッセージが表示されます。

## ライフサイクル計測の仕組み

- アプリが `AppLifecycleState.paused` になるとスリープ計測を開始し、`resumed` で経過時間をポイントに変換します。
- 1 分あたり 12 ポイントが貯まり、最大で 8 時間分 (5760pt) までカウントします。
- 端末の挙動をテストするために、画面上部のスイッチから手動で「睡眠中 / 起きている」を切り替えて計測を再現することもできます。

## ディレクトリ構成

```
lib/
  game/game_state.dart      # ゲーム進行とポイント計測
  models/                   # 猫や遊び場のデータモデル
  ui/                       # 画面ウィジェット
assets/images/              # 猫画像 (プレースホルダー)
```

## ライセンス

プロジェクトコードは MIT License のもとで利用できます。猫の画像は提供元のライセンスに従ってご利用ください。
